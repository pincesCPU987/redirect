<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Redirecting to ''...</title>
    <script>
      function write(text){
        var p = document.getElementById('p');
        p.innerHTML = text;
      }
      function writeDec(text,time){
        setTimeout(function(){write(text)},time);
        setTimeout(function(){write(text + '.')},time+125);
        setTimeout(function(){write(text + '..')},time+250);
        setTimeout(function(){write(text + '...')},time+375);
        setTimeout(function(){write(text + '....')},time+500);
        setTimeout(function(){write(text + '...')},time+625);
        setTimeout(function(){write(text + '..')},time+750);
        setTimeout(function(){write(text + '.')},time+875);
      }
      window.onload = function(){
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const to = urlParams.get('to');
        const from = urlParams.get('from');
        const newtab = urlParams.get('newtab');
        window.document.title = window.document.title.replace('\'\'','\'' + to + '\'');
        var h1 = document.getElementById('h1');
        h1.innerHTML = 'Redirecting to \'' + to + '\'.'
        var a = document.getElementById('a');
        a.href = from;
        writeDec('5',0);
        writeDec('4',1000);
        writeDec('3',2000);
        writeDec('2',3000);
        writeDec('1',4000);
        if(newtab == 'true'){
          setTimeout(function(){window.open(to);},5000);
          setTimeout(function(){window.location.replace(from);},6000);
        } else {
          setTimeout(function(){window.location.replace(to);},5000);
        }
      }
    </script>
  </head>
  <body>
    <a id="a">Go back</a>
    <h1 id="h1">Redirecting to </h1>
    <p id="p"></p>
  </body>
</html>
